"use strict";!function(){function n(e){return'\n      <div class="item" data-id='.concat(e.id,'>\n        <a href="').concat(e.owner.url,'" target="_blank" class="text--underline text--bold">').concat(e.owner.name,"</a>\n        <span>").concat(new Date(e.utcCreated).toLocaleString(),"</span>\n        <p>").concat(e.htmlText,'</p>\n        <hr style="border:1px solid #eee;">\n      </div>\n    ')}var r,a,o,i,e=document.querySelector("h1"),l=e?e.innerHTML:"undefined",c=JSON.parse(localStorage.getItem("COMMENT_OWNER"));new Talking(function(){return{el:document.querySelector(".post--comment"),api:window.hexoThemeConfig.comment_sys_api,template:document.querySelector("#comment-tmpl").innerHTML,inited:function(e){r=e.querySelector('input[name="owner_name"]'),a=e.querySelector('input[name="owner_email"]'),o=e.querySelector('input[name="owner_website"]'),i=e.querySelector('textarea[name="html_text"]'),e.querySelector(".comments").innerHTML+="loading ...",c&&(r.value=c.name,a.value=c.email,o.value=c.url)},render:function(e){var t="";e.detail.list.forEach(function(e){t+=n(e)}),document.querySelector(".comments").innerHTML=t||"赶快评论吧！"},submit:function(){c={name:r.value.trim(),email:a.value.trim(),url:o.value.trim()};var e=i.value.trim(),t=location.pathname;if(!c.name)return alert("请输入昵称");if(!c.email)return alert("请输入邮箱");if(!e)return alert("请输入评论内容");var n=e.replace(/<(\/?script)>/g,function(e,t){return"&lt;"+t+"&gt;"}).replace(/\r?\n/g,"<br>");return{owner:c,postTitle:l,postUrl:t,htmlText:e=n}},created:function(e){i.value="",localStorage.setItem("COMMENT_OWNER",JSON.stringify(c));var t=document.querySelector(".comments"),e=n(e.detail);t.innerHTML=t.innerHTML.length<10?e:e+t.innerHTML}}})}();